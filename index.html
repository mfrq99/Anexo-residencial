<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anexo Residencial UC Christus</title>

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background:#eef2f7;
  margin:0;
  padding:10px;
}
.container {
  max-width:500px;
  margin:auto;
  background:white;
  border-radius:15px;
  box-shadow:0 4px 15px rgba(0,0,0,.1);
  overflow:hidden;
}
.header {
  background:#007bff;
  color:white;
  padding:20px;
  text-align:center;
}
.nav {
  display:flex;
  background:#f8f9fa;
}
.nav div {
  flex:1;
  padding:10px;
  text-align:center;
  cursor:pointer;
  font-weight:bold;
  font-size:11px;
  color:#555;
}
.nav div.active {
  background:white;
  color:#007bff;
  border-bottom:3px solid #007bff;
}
.section {
  display:none;
  padding:20px;
}
.section.active {
  display:block;
}
input, button {
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:1px solid #ccc;
}
button {
  background:#28a745;
  color:white;
  font-weight:bold;
  border:none;
}
.badge {
  background:#dc3545;
  color:white;
  padding:5px 10px;
  border-radius:20px;
  font-size:12px;
}
hr {
  border:none;
  border-top:1px solid #eee;
  margin:15px 0;
}
ul {
  padding-left:20px;
}
.help {
  font-size:12px;
  color:#666;
}
.info-box {
  background:#f1f8ff;
  padding:10px;
  border-radius:8px;
  margin-top:10px;
  font-size:13px;
}
iframe {
  width:100%;
  border:0;
  border-radius:10px;
}
</style>
</head>

<body>

<div class="container">

<div class="header">
  <h2>Anexo Residencial UC Christus</h2>
  <small>Unidad de Recuperaci√≥n y Regaloneo</small>
</div>

<div class="nav">
  <div class="active" onclick="openTab('inicio', this)">RESIDENCIA</div>
  <div onclick="openTab('paciente', this)">PACIENTE</div>
  <div onclick="openTab('equipoMedico')">EQUIPO M√âDICO</div>
  <div onclick="openTab('equipo', this)">ADMINISTRACI√ìN</div>
  <div onclick="openTab('ubicacion', this)">UBICACI√ìN</div>
</div>

<!-- RESIDENCIA -->
<div id="inicio" class="section active">
  <h3>Descripci√≥n de la Residencia</h3>
  <p>
    Unidad de recuperaci√≥n domiciliaria post-alta, orientada al bienestar,
    estabilidad emocional y cuidado integral de la paciente.
  </p>
  <p style="background:#fff3cd;padding:10px;border-radius:6px;">
    üëâ Para reservar visitas debe ingresar a la secci√≥n <strong>Paciente</strong>.
  </p>
</div>

<!-- PACIENTE -->
<div id="paciente" class="section">

  <h3>Acceso Paciente</h3>

  <div id="login">
    <input id="rut" placeholder="RUT del paciente">
    <div class="help">Ingrese RUT sin puntos y con guion</div>
    <input id="fecha" type="date">
    <button onclick="login()">Ingresar</button>
  </div>

  <div id="ficha" style="display:none">

    <hr>
    <h4>Ficha Cl√≠nica</h4>

    <div class="info-box" style="display:flex;gap:10px;align-items:center;">
      <img src="images/paciente.jpg" style="width:60px;height:60px;border-radius:50%;">
      <div>
        <strong>Margarita De Las Mercedes Arriaza Zamorano</strong><br>
        <small>RUT: 6.921.444-4</small>
      </div>
    </div>

    <p><strong>Nacimiento:</strong> 06-01-1951</p>
    <p><strong>Ingreso:</strong> 01-02-2026</p>
    <p><strong>Unidad:</strong> Recuperaci√≥n Card√≠aca Domiciliaria</p>

    <hr>
    <h4>Diagn√≥stico</h4>
    <div class="info-box">
      Recuperaci√≥n post-alta card√≠aca en ambiente familiar controlado.
    </div>

    <hr>
    <h4>M√©dico Tratante</h4>

    <div class="info-box" onclick="toggleMedico()" style="cursor:pointer;display:flex;gap:10px;">
      <img src="images/doctor-teo.jpg" style="width:60px;height:60px;border-radius:50%;">
      <div>
        <strong>Dr. Hazelnut Teo</strong><br>
        <small>Cardiolog√≠a Emocional</small>
      </div>
    </div>

    <div id="infoMedico" class="info-box" style="display:none;">
      Especialista en contenci√≥n emocional y regaloneo terap√©utico.
    </div>

    <hr>
    <h4>Medicaci√≥n Actual</h4>
    <div class="info-box">
      <ul>
        <li>Languetazos terap√©uticos a demanda</li>
        <li>T√© caliente matinal y vespertino</li>
        <li>Abrazos controlados</li>
      </ul>
    </div>

    <hr>
    <h4>Reserva de Visitas</h4>
    <button onclick="mostrarCalendly()">Reservar visita</button>

    <div id="calendly" style="display:none;margin-top:15px;">
      <iframe src="https://calendly.com/mfrq89/30min" height="600"></iframe>
    </div>

  </div>
</div>

<!-- ADMINISTRACI√ìN -->
<div id="equipo" class="section">
  <h3>Equipo a Cargo</h3>
  <p><strong>Director:</strong> Emilio Riquelme Ramirez</p>
  <p><strong>Contacto:</strong> +56 9 9797 5998</p>
  <hr>
  <p>Soporte emocional: Carboncito & Negranieves üêæ</p>
</div>

<!-- EQUIPO M√âDICO -->
<div id="equipoMedico" class="section">
  <h3>ü©∫ Acceso Equipo M√©dico</h3>

  <!-- LOGIN -->
  <div id="loginMedico">
    <input id="userMedico" placeholder="Usuario">
    <input id="passMedico" type="password" placeholder="Clave">
    <button onclick="loginMedico()">Ingresar</button>
  </div>

  <!-- PANEL M√âDICO -->
  <div id="panelMedico" style="display:none">

    <hr>
    <h4>üíä Medicaci√≥n Actual</h4>

    <input id="medNombre" placeholder="Medicamento">
    <input id="medDosis" placeholder="Dosis">
    <input id="medHorario" placeholder="Horario (ej: 08:00)">
    <input id="medObs" placeholder="Observaciones">
    <button onclick="agregarMedicamento()">Agregar medicamento</button>

    <ul id="listaMedicacion"></ul>

    <hr>
    <h4>üß™ Controles y Ex√°menes</h4>

    <input id="exFecha" type="date">
    <input id="exTipo" placeholder="Tipo de control / examen">
    <input id="exNota" placeholder="Resultado / comentario">
    <button onclick="agregarExamen()">Agregar control</button>

    <ul id="listaExamenes"></ul>

    <hr>
    <h4>üìù Indicaciones M√©dicas</h4>

    <input id="indicacion" placeholder="Nueva indicaci√≥n m√©dica">
    <button onclick="agregarIndicacion()">Agregar indicaci√≥n</button>

    <ul id="listaIndicaciones"></ul>

  </div>
</div>
  
<!-- UBICACI√ìN -->
<div id="ubicacion" class="section">
  <h3>Ubicaci√≥n</h3>
  <p>Pasaje Cerro Cordillera 2436, Pe√±aflor</p>
  <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3323.0858591025353!2d-70.88335822437418!3d-33.60307667332938!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9662e6c85ebc0ee5%3A0x36b025956bcb428c!2sCerro%20Cordillera%202436%2C%209750900%20Penaflor%2C%20Pe%C3%B1aflor%2C%20Regi%C3%B3n%20Metropolitana!5e0!3m2!1ses-419!2scl!4v1769982217862!5m2!1ses-419!2scl" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
</div>

</div>

<script>
const PACIENTE_RUT = "6921444-4";
const PACIENTE_FECHA = "1951-01-06";


function login() {
  if (
    document.getElementById("rut").value === PACIENTE_RUT &&
    document.getElementById("fecha").value === PACIENTE_FECHA
  ) {
    document.getElementById("login").style.display = "none";
    document.getElementById("ficha").style.display = "block";
  } else {
    alert("Datos incorrectos");
  }
}

function toggleMedico() {
  const m = document.getElementById("infoMedico");
  m.style.display = m.style.display === "none" ? "block" : "none";
}

function mostrarCalendly() {
  document.getElementById("calendly").style.display = "block";
}

function openTab(id, el) {
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.querySelectorAll(".nav div").forEach(n => n.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  el.classList.add("active");
}

/* ===== LOGIN EQUIPO M√âDICO ===== */
function loginMedico() {
  const u = document.getElementById("userMedico").value;
  const p = document.getElementById("passMedico").value;

  if (u === "admin" && p === "1234") {
    document.getElementById("loginMedico").style.display = "none";
    document.getElementById("panelMedico").style.display = "block";
    cargarMedicacion();
    cargarExamenes();
    cargarIndicaciones();
  } else {
    alert("Credenciales incorrectas");
  }
}

/* ===== MEDICACI√ìN ===== */
function agregarMedicamento() {
  const data = JSON.parse(localStorage.getItem("medicacion") || "[]");

  data.push({
    nombre: medNombre.value,
    dosis: medDosis.value,
    horario: medHorario.value,
    obs: medObs.value
  });

  localStorage.setItem("medicacion", JSON.stringify(data));
  cargarMedicacion();
}

function cargarMedicacion() {
  const lista = document.getElementById("listaMedicacion");
  lista.innerHTML = "";
  const data = JSON.parse(localStorage.getItem("medicacion") || "[]");

  data.forEach((m, i) => {
    const li = document.createElement("li");
    li.innerHTML = `
      <strong>${m.nombre}</strong> ‚Äì ${m.dosis} ‚Äì ${m.horario}<br>
      <small>${m.obs}</small>
      <br><span class="link" onclick="eliminarMedicamento(${i})">Eliminar</span>
    `;
    lista.appendChild(li);
  });
}

function eliminarMedicamento(i) {
  const data = JSON.parse(localStorage.getItem("medicacion"));
  data.splice(i, 1);
  localStorage.setItem("medicacion", JSON.stringify(data));
  cargarMedicacion();
}

/* ===== EX√ÅMENES ===== */
function agregarExamen() {
  const data = JSON.parse(localStorage.getItem("examenes") || "[]");

  data.push({
    fecha: exFecha.value,
    tipo: exTipo.value,
    nota: exNota.value
  });

  localStorage.setItem("examenes", JSON.stringify(data));
  cargarExamenes();
}

function cargarExamenes() {
  const lista = document.getElementById("listaExamenes");
  lista.innerHTML = "";
  const data = JSON.parse(localStorage.getItem("examenes") || "[]");

  data.forEach((e, i) => {
    const li = document.createElement("li");
    li.innerHTML = `
      üìÖ ${e.fecha} ‚Äì <strong>${e.tipo}</strong><br>
      <small>${e.nota}</small>
      <br><span class="link" onclick="eliminarExamen(${i})">Eliminar</span>
    `;
    lista.appendChild(li);
  });
}

function eliminarExamen(i) {
  const data = JSON.parse(localStorage.getItem("examenes"));
  data.splice(i, 1);
  localStorage.setItem("examenes", JSON.stringify(data));
  cargarExamenes();
}

/* ===== INDICACIONES ===== */
function agregarIndicacion() {
  const data = JSON.parse(localStorage.getItem("indicaciones") || "[]");
  data.push(indicacion.value);
  localStorage.setItem("indicaciones", JSON.stringify(data));
  cargarIndicaciones();
}

function cargarIndicaciones() {
  const lista = document.getElementById("listaIndicaciones");
  lista.innerHTML = "";
  const data = JSON.parse(localStorage.getItem("indicaciones") || "[]");

  data.forEach((i, idx) => {
    const li = document.createElement("li");
    li.innerHTML = `
      ${i}
      <br><span class="link" onclick="eliminarIndicacion(${idx})">Eliminar</span>
    `;
    lista.appendChild(li);
  });
}

function eliminarIndicacion(i) {
  const data = JSON.parse(localStorage.getItem("indicaciones"));
  data.splice(i, 1);
  localStorage.setItem("indicaciones", JSON.stringify(data));
  cargarIndicaciones();
}

</script>

</body>
</html>
