<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anexo Residencial UC Christus</title>

<style>
body {
  font-family: "Segoe UI", sans-serif;
  background: #f2f6fb;
  margin: 0;
}
.nav {
  display: flex;
  background: #003a8f;
  color: white;
}
.nav div {
  padding: 15px;
  cursor: pointer;
}
.nav .active {
  background: #0056d2;
}
.section {
  display: none;
  padding: 20px;
}
.section.active {
  display: block;
}
.card {
  background: white;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,.1);
}
input, button {
  padding: 10px;
  margin: 5px 0;
  width: 100%;
}
button {
  background: #0056d2;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
h2 { color: #003a8f; }
small { color: gray; }
ul { padding-left: 20px; }
</style>
</head>

<body>

<!-- NAV -->
<div class="nav">
  <div class="active" onclick="openTab('inicio', this)">INICIO</div>
  <div onclick="openTab('paciente', this)">PACIENTE</div>
  <div onclick="openTab('equipoMedico', this)">EQUIPO M√âDICO</div>
</div>

<!-- INICIO -->
<div id="inicio" class="section active">
  <div class="card">
    <h2>Anexo Residencial UC Christus</h2>
    <p>Residencia de recuperaci√≥n post hospitalaria enfocada en descanso, cari√±o y visitas organizadas.</p>
    <p><strong>Importante:</strong> Para reservar una visita, ingrese a la secci√≥n <b>Paciente</b>.</p>
    <p>Director del Anexo: <b>Pap√°</b></p>
    <p>Soporte t√©cnico: <b>Carboncito & Negranieves</b></p>
  </div>
</div>

<!-- PACIENTE -->
<div id="paciente" class="section">
  <div class="card" id="loginPaciente">
    <h2>Acceso Paciente</h2>
    <small>Ingrese RUT sin puntos y con gui√≥n</small>
    <input id="rutPaciente" placeholder="6921444-4">
    <input id="fechaPaciente" type="date">
    <button onclick="loginPaciente()">Ingresar</button>
  </div>

  <div class="card" id="ficha" style="display:none;">
    <h2>Ficha del Paciente</h2>
    <p><b>Nombre:</b> Abuelita</p>
    <p><b>RUT:</b> 6921444-4</p>
    <p><b>Fecha nacimiento:</b> 06-01-1951</p>
    <p><b>Fecha ingreso:</b> Febrero 2026</p>
    <p><b>Unidad:</b> Recuperaci√≥n y Regaloneo</p>
    <p>
      <b>M√©dico tratante:</b>
      <span style="color:#0056d2; cursor:pointer;" onclick="alert('Dr. Hazelnut Teo\nEspecialista en cari√±o, abrazos terap√©uticos y alta sonrisal.')">
        Dr. Hazelnut Teo
      </span>
    </p>

    <hr>

    <h3>üíä Medicaci√≥n Actual</h3>
    <ul id="listaMedicacion"></ul>

    <h3>üß™ Ex√°menes y Controles</h3>
    <ul id="listaExamenes"></ul>

    <h3>üìù Indicaciones M√©dicas</h3>
    <ul id="listaIndicaciones"></ul>

    <hr>
    <h3>üìÖ Reservar Visita</h3>
    <a href="https://calendly.com/mfrq89/30min" target="_blank">
      <button>Ir a Calendario de Visitas</button>
    </a>
  </div>
</div>

<!-- EQUIPO MEDICO -->
<div id="equipoMedico" class="section">
  <div class="card" id="loginEquipo">
    <h2>Acceso Equipo M√©dico</h2>
    <input id="user" placeholder="Usuario">
    <input id="pass" type="password" placeholder="Clave">
    <button onclick="loginEquipo()">Ingresar</button>
  </div>

  <div id="panelEquipo" style="display:none;">
    <div class="card">
      <h2>Registrar Medicaci√≥n</h2>
      <input id="medNombre" placeholder="Medicamento">
      <input id="medHorario" placeholder="Horario">
      <button onclick="agregarMedicacion()">Guardar</button>
    </div>

    <div class="card">
      <h2>Registrar Examen</h2>
      <input id="exNombre" placeholder="Examen">
      <input id="exFecha" type="date">
      <button onclick="agregarExamen()">Guardar</button>
    </div>

    <div class="card">
      <h2>Indicaciones M√©dicas</h2>
      <input id="indTexto" placeholder="Indicaci√≥n">
      <button onclick="agregarIndicacion()">Guardar</button>
    </div>
  </div>
</div>

<script>
function openTab(id, el) {
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.querySelectorAll(".nav div").forEach(n => n.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  el.classList.add("active");

  if (id === "paciente" && document.getElementById("ficha").style.display === "block") {
    mostrarMedicacion();
    mostrarExamenes();
    mostrarIndicaciones();
  }
}

// LOGIN PACIENTE
function loginPaciente() {
  if (
    document.getElementById("rutPaciente").value === "6921444-4" &&
    document.getElementById("fechaPaciente").value === "1951-01-06"
  ) {
    document.getElementById("loginPaciente").style.display = "none";
    document.getElementById("ficha").style.display = "block";
    mostrarMedicacion();
    mostrarExamenes();
    mostrarIndicaciones();
  } else {
    alert("Datos incorrectos");
  }
}

// LOGIN EQUIPO
function loginEquipo() {
  if (
    document.getElementById("user").value === "admin" &&
    document.getElementById("pass").value === "1234"
  ) {
    document.getElementById("loginEquipo").style.display = "none";
    document.getElementById("panelEquipo").style.display = "block";
  } else {
    alert("Acceso denegado");
  }
}

// MEDICACION
function agregarMedicacion() {
  let data = JSON.parse(localStorage.getItem("meds") || "[]");
  data.push({
    nombre: medNombre.value,
    horario: medHorario.value
  });
  localStorage.setItem("meds", JSON.stringify(data));
  medNombre.value = "";
  medHorario.value = "";
  alert("Medicamento guardado");
}

function mostrarMedicacion() {
  let ul = document.getElementById("listaMedicacion");
  ul.innerHTML = "";
  JSON.parse(localStorage.getItem("meds") || "[]")
    .forEach(m => ul.innerHTML += `<li>${m.nombre} ‚Äì ${m.horario}</li>`);
}

// EXAMENES
function agregarExamen() {
  let data = JSON.parse(localStorage.getItem("examenes") || "[]");
  data.push({
    nombre: exNombre.value,
    fecha: exFecha.value
  });
  localStorage.setItem("examenes", JSON.stringify(data));
  exNombre.value = "";
  exFecha.value = "";
  alert("Examen guardado");
}

function mostrarExamenes() {
  let ul = document.getElementById("listaExamenes");
  ul.innerHTML = "";
  JSON.parse(localStorage.getItem("examenes") || "[]")
    .forEach(e => ul.innerHTML += `<li>${e.nombre} ‚Äì ${e.fecha}</li>`);
}

// INDICACIONES
function agregarIndicacion() {
  let data = JSON.parse(localStorage.getItem("indicaciones") || "[]");
  data.push(indTexto.value);
  localStorage.setItem("indicaciones", JSON.stringify(data));
  indTexto.value = "";
  alert("Indicaci√≥n guardada");
}

function mostrarIndicaciones() {
  let ul = document.getElementById("listaIndicaciones");
  ul.innerHTML = "";
  JSON.parse(localStorage.getItem("indicaciones") || "[]")
    .forEach(i => ul.innerHTML += `<li>${i}</li>`);
}
</script>

</body>
</html>
